<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ´ Mi Cartilla â€” Bingo Pro</title>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Outfit:wght@300;400;600;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/static/css/cartillas.css">
  <style>
    .player-wrap{max-width:1050px;margin:0 auto;padding:22px;}
    .card{background:var(--panel);border:1px solid var(--border);border-radius:16px;padding:20px;}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .row>div{flex:1;min-width:220px}
    .label{display:block;margin:10px 0 5px;color:var(--muted);font-size:.8rem;letter-spacing:.5px;text-transform:uppercase;}
    .input{width:100%;padding:11px 14px;border-radius:10px;border:1px solid var(--border);
           background:var(--card);color:var(--text);outline:none;font-family:'Outfit',sans-serif;
           font-size:.9rem;transition:border-color .2s;}
    .input:focus{border-color:var(--accent);}
    .btn-row{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .hint{color:var(--muted);font-size:.82rem;margin-top:5px;line-height:1.5;}
    .mylist{margin-top:18px}
    .myitem{display:flex;gap:10px;align-items:center;justify-content:space-between;
            border:1px solid var(--border);background:var(--card);padding:12px 14px;
            border-radius:14px;margin-top:10px;flex-wrap:wrap;}
    .myitem .meta{display:flex;flex-direction:column;}
    .myitem .actions{display:flex;gap:8px;flex-wrap:wrap;}
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.65);display:none;
             align-items:center;justify-content:center;z-index:999;}
    .overlay.show{display:flex;}
    .overlay .modal{width:min(520px,92vw);background:var(--panel);border:1px solid var(--border);
                    border-radius:18px;padding:24px;}
  </style>
</head>
<body>
  <nav>
    <a href="/" class="logo">ğŸ± Bingo Pro</a>
    <div class="nav-links">
      <a href="/" class="nav-link">ğŸ® Juego</a>
      <a href="/cartillas" class="nav-link active">ğŸ´ Mi Cartilla</a>
    </div>
  </nav>

  <div class="player-wrap">
    <div class="card">
      <h1 style="font-family:'Bebas Neue',sans-serif;letter-spacing:2px;margin:0 0 4px;
                 color:var(--accent);font-size:2.2rem;">ğŸ´ Mi Cartilla</h1>
      <p style="color:var(--muted);font-size:.85rem;margin-bottom:16px;">
        El administrador te darÃ¡ un cÃ³digo de un solo uso para generar tu cartilla.
      </p>

      <div class="row">
        <div>
          <label class="label">CÃ³digo del administrador</label>
          <input id="inp-code" class="input" maxlength="10" placeholder="Ej: A1B2C3"
                 style="letter-spacing:2px;font-weight:900;text-transform:uppercase;">
          <div class="hint">âš ï¸ Cada cÃ³digo es de <strong>un solo uso</strong>. Ãšsalo con cuidado.</div>
        </div>
        <div>
          <label class="label">Tu nombre completo</label>
          <input id="inp-name" class="input" maxlength="60" placeholder="Ej: Juan PÃ©rez LÃ³pez">
          <div class="hint">Este nombre saldrÃ¡ impreso en tu cartilla.</div>
        </div>
      </div>

      <div class="btn-row">
        <button class="btn btn-primary" onclick="generateAuto()">ğŸ² Generar cartilla aleatoria</button>
        <button class="btn btn-ghost"   onclick="toggleManual()">ğŸ§© Escoger mis nÃºmeros</button>
        <button class="btn btn-ghost"   onclick="goToGame()">ğŸ‘ Ver juego en vivo</button>
      </div>

      <div id="manual-area" style="display:none;margin-top:16px;border-top:1px solid var(--border);padding-top:16px;">
        <h3 style="margin-bottom:8px;">Selector manual</h3>
        <div class="hint" style="margin-bottom:10px;">
          Selecciona <strong>15 nÃºmeros</strong>. MÃ¡ximo 2 por columna.
          Necesitas el cÃ³digo del admin igual que en el modo automÃ¡tico.
        </div>
        <div id="picker"></div>
        <div class="btn-row" style="margin-top:10px;">
          <button class="btn btn-primary" onclick="saveManual()">ğŸ’¾ Guardar mi selecciÃ³n</button>
          <button class="btn btn-ghost"   onclick="clearManual()">ğŸ§¹ Limpiar</button>
        </div>
      </div>

      <div class="mylist">
        <h3 style="margin-top:6px;margin-bottom:4px;">Mis cartillas</h3>
        <div class="hint" style="margin-bottom:10px;">
          Guardadas localmente en este dispositivo. Guarda el ID o descarga tu cartilla.
        </div>
        <div id="mylist"></div>
      </div>
    </div>
  </div>

  <div id="toast" class="toast"></div>

  <div id="started-overlay" class="overlay">
    <div class="modal">
      <h2 style="color:var(--danger);margin-bottom:8px;">â›” Juego en curso</h2>
      <p style="color:var(--muted);line-height:1.6;">
        Ya se sorteÃ³ al menos una bolilla. No es posible generar nuevas cartillas.<br><br>
        SerÃ¡s redirigido al juego en unos segundosâ€¦
      </p>
      <div class="btn-row" style="margin-top:14px;">
        <button class="btn btn-primary" onclick="goToGame()">ğŸ‘ Ir al juego ahora</button>
      </div>
    </div>
  </div>

  <script src="/static/js/cartillas_player.js"></script>
</body>
</html>
